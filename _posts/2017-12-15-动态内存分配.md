动态内存分配器，对于c语言，c标准库提供了malloc和free，可以在运行时刻申请额外的内存。其实，完全可以通过mmap和munmap来创建和删除内存区域(areas)，不过动态内存分配器更方便。

![堆](/assets/img/dynamic_memory_allocation/heap.png)

动态内存分配器维护进程的内存中一个叫做堆的区域。可以认为堆是一个demand-zero的内存区域，在bss区域的上面向上增长（向高地址）。内核为每个进程维护了一个brk变量指向堆的顶部。分配器将堆组织为一个集合，集合里的元素是一个个大小不等的blocks，每一个block是一块连续的内存，要么已分配(allocated)，要么未分配(free)。

* 已分配block显式的被应用程序申请使用，直到被释放，变成未分配的block。释放要么显示的被应用程序释放，要么被分配器自己隐式的释放。
* 未分配block可以被分配。可以通过被应用程序显示的申请变成已分配。

分配器有两种方式，两者都要求应用程序显示申请内存，区别在于谁负责释放已分配的blocks。

* 显示分配器：需要应用程序显示的释放所有的已分配blocks。比如上面提到的c语言里的malloc和free，还有c++里的new和delete
* 隐式分配器：分配器会检测何时已分配blocks不再使用了，然后释放。隐式分配器也被称为垃圾回收器(garbage collectors)，自动释放不再使用的已分配块的过程叫做垃圾回收。比如高级语言Lisp，ML，Java。

本文介绍显示分配器。
